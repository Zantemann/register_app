# Security Documentation

This document outlines the security aspects of the application, including authentication, authorization, session handling, and data handling and storage.

## Authentication

The application uses **Twilio Verify API** for phone number-based passwordless authentication via SMS. Check more from [Twilio Verify API Documentation](https://www.twilio.com/docs/verify/api).

**Process**:

1. Users provide their phone number, and the application checks that it exists in the invitation list database.
2. The application requests Twilio to send a One-Time Password (OTP) via SMS to the provided phone number.
3. After the user receives the OTP, it is sent to Twilio to be verified.
4. Upon successful verification, the user gains access to the application.

**Security**:

- Twilio Verify API takes fully care of the authentication process from sending the OTPs via SMS to verifying them.
- Twilio ensures the security of OTPs by implementing critical measures such as expiration, API and SMS rate limiting, and monitoring for suspicious activity.
- Various security aspects of authentication, such as OTP expiration time, SMS rate limits, and service availability, can be configured based on application requirements.
- The application formats and validates phone numbers before sending requests to Twilio to minimize unnecessary API usage.

**Risks**:

- Unauthorized access is possible if someone gains access to the invited user's phone and retrieves the OTP.
- The OTP provides access to the application during its validity period, increasing the risk of unauthorized access if the OTP is leaked.
- Abuse of the OTP service can lead to increased costs, even with rate limiting in place.

## Session Handling

After successful authentication, a new user session is created to verify the user's access to the application. The session is saved in the database and accessed via cookies on the client side.

**Process**:

1. A new session is created upon successful authentication.
2. Each session is identified by a unique token that is generated by the application using a cryptographically secure random number generator.
3. The session is stored in the database and linked to the user's data to manage access and authorization within the application.
4. The session is accessed in the application via cookies.

**Security**:

- Cookies are configured with the `HttpOnly` and `Secure` flags to prevent client-side access and ensure transmission over HTTPS.
- The `SameSite` attribute is set to prevent cross-site request forgery (CSRF) attacks.
- Sessions are automatically invalidated after a predefined expiration time and are also deleted from the database to prevent unauthorized access.

**Risks**:

- Session hijacking is possible if cookies are intercepted, though mitigated by HTTPS and secure cookie flags.
- Users who fail to log out on shared devices may leave their sessions vulnerable to unauthorized access.

## Data Handling and Storage

User's personal data and session information are stored in a MongoDB database and are accessible only to the respective user. Personal data is shared between the main guest and their additional guests (e.g., "avec").

**Process**:

1. When a user is invited to an event, their data is stored in the database.
2. Users can edit certain details about themselves and their additional guests, such as attendance status and preferences, and save these changes to the database.

**Security**:

- User inputs are sanitized and validated before being saved to the database to prevent injection attacks and ensure data integrity.
- Users can only access and edit their own data and the data of their additional guests.
- Access to the database is restricted to authorized services, ensuring that only authenticated and authorized operations are performed.

**Risks**:

- A guest can view and edit the data of additional guests, which may lead to privacy concerns.
- The additional guests' data can potentially be edited without their knowledge, leading to potential misuse or conflicts.

# OWASP Top 10 Overview

# Future Improvements
